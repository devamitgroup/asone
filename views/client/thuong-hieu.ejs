<!DOCTYPE html>
<html lang="vi">
<%- include('partials/head', { title: title }) %>
<body>
    <%- include('partials/header') %>

    <div class="navi">
        <div class="w-ct padding15">
            <a href="/">Trang chủ</a><span>/</span>
            <span>Thương hiệu</span>
        </div>
    </div>

    <div class="w-ct padding15 clearfix">
        <div class="fixmobile clearfix">
            <div class="row" id="list-brands">
                <div class="col-xs-12 text-center">Đang tải thương hiệu...</div>
            </div>
        </div>
    </div>

    <%- include('partials/footer') %>
    <%- include('partials/social_ring') %>
    <%- include('partials/scripts') %>

    <script>
        (async () => {
            const list = document.querySelector("#list-brands");
            try {
                const res = await fetch("/thuong-hieu/all");
                const data = await res.json();
                if (data && data.length > 0) {
                    list.innerHTML = "";
                    data.forEach(value => {
                        list.innerHTML += `
                            <div class="col-md-3 col-sm-4 col-xs-6">
                                <div class="hcate-i">
                                    <div class="brand-img-wrapper">
                                        <a href="/thuong-hieu/${value.slug}">
                                            <img alt="${value.name}" src="${value.avt}" />
                                        </a>
                                    </div>
                                    <h2>
                                        <a href="/thuong-hieu/${value.slug}"><strong>${value.name}</strong></a>
                                    </h2>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    list.innerHTML = '<div class="col-xs-12 text-center">Không tìm thấy thương hiệu nào.</div>';
                }
            } catch (err) {
                console.error("Error loading brands:", err);
                list.innerHTML = '<div class="col-xs-12 text-center">Lỗi khi tải dữ liệu.</div>';
            }
        })();
    </script>
</body>
</html>
